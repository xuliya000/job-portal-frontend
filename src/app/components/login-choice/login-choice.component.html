<div class="container mt-5 text-center">
  <h1>Welcome to Job Portal</h1>
  <p>Please select your profile to proceed:</p>

  <div class="d-flex justify-content-center gap-4 mt-4">
    <button class="btn btn-primary" (click)="selectProfile('candidate')">Candidate</button>
    <button class="btn btn-secondary" (click)="selectProfile('recruiter')">Recruiter</button>
  </div>

  <!-- Partie "Se connecter" ou "Créer un compte" -->
  <div *ngIf="selectedProfile" class="mt-5">
    <ng-container *ngIf="!showRegister; else registerTemplate">
      <h2>{{ selectedProfile | titlecase }} Login</h2>
      <app-login
        [profile]="selectedProfile"
        (roleMismatch)="handleRoleMismatch($event)"
      ></app-login>

      <p class="mt-3">
        Don't have an account?
        <a href="#" (click)="openRegister($event)">Create one</a>
      </p>
    </ng-container>

    <ng-template #registerTemplate>
      <ng-container *ngIf="selectedProfile === 'recruiter'; else realRegisterForm">
        <div class="alert alert-warning text-start">
          <strong><i class="bi bi-exclamation-triangle-fill me-2"></i>Inscription restreinte</strong><br />
          L'inscription pour les recruteurs doit être vérifiée.<br />
          Veuillez contacter
          <a href="mailto:linsteven2003&#64;gmail.com">linsteven2003&#64;gmail.com</a> ou
          <a href="mailto:xuliya2001&#64;gmail.com">xuliya2001&#64;gmail.com</a>
          pour obtenir un compte recruteur.
        </div>
        <p>
          <button class="btn btn-outline-dark mt-3" (click)="backToLogin()">
            <i class="bi bi-arrow-left-circle me-1"></i> Retour à la connexion
          </button>
        </p>
      </ng-container>

      <ng-template #realRegisterForm>
        <h2>Register as {{ selectedProfile | titlecase }}</h2>
        <app-register [profile]="selectedProfile"></app-register>
        <p class="mt-3">
          Already have an account?
          <a href="#" (click)="backToLogin($event)">Back to Login</a>
        </p>
      </ng-template>
    </ng-template>

    <!-- Affichage d'erreur -->
    <div *ngIf="errorMessage" class="alert alert-danger mt-3">
      {{ errorMessage }}
    </div>
  </div>
</div>
